### go开发工程结构

> 其他语言一个项目一个工作区，go建议所有的项目使用同一个目录工作区。

go语言的工作区是一个目录，下边有3个主要的文件件，src用于保存源码文件，pkg用于保存二进制库文件，bin用于保存二进制可执行文件。GOPATH就是工作区的根目录。

```
bin/
pkg/
src/
	project1/
		.git/
		package1/
		package2/
		main.go
		vendor/
		Gopkg.lock
		Gopkg.toml
	project2/
		.git
		...
```

项目在src目录下划分，代码仓库在每个项目下。package1和package2是项目project1的自定义的包，vendor用于存放project1项目的第三方代码。

### go基础语法

#### package

- package是最基本的分发单位和工程管理依赖关系的体现
- 每个go语言源代码文件开头都拥有一个package声明，表示源代码所属的包
- 要生产go语言的可执行文件，必须要有main的package包，且必须在包下有main函数
- 同一个包下只能存在一个package，但一个package可以拆成多个源文件

#### import

- 一个main导入其他包，包将顺序导入
- 如果导入的包中依赖其他的包(包B)，会首先导入B包，然后初始化B包中的常量和变量，最后如果B包中包含init方法，会自动执行init方法
- 所有导入包完成后才会对main中的常量和变量进行初始化，然后执行main中的init方法(如果存在)，最后执行main方法
- 如果一个包被导入多次，则该包只会被导入一次

#### 切片和数组

- 数组是定长的静态的，一旦定义好长度就无法更改，而且不同长度的数组属于不同的类型。在Go语言中数组是一个值类型，所有的值类型变量在赋值和作为参数传递时都将产生一次复制动作。如果将数组作为函数的参数类型，则在函数调用时该参数将发生数据复制。因此，在函数体中无法 改变传入的数组的内容，因为函数内操作的只是所传入数组的一个副本。

- 数组切片就像一个 指向数组的指针，实际上它拥有自己的数据结构，包括(一个 指向原生数组的指针；数组切片中的元素个数；数组切片已分配的存储空间)。切片每一次追加后都会形成新的切片变量，如果底层数组没有扩容，那么追加前后的两个切片变量共享底层数组，如果底层数组扩容了，那么追加前后的底层数组是分离的不共享的。如果底层数组是共享的，一个切片的内容变化就会影响到另一个切片。

- 切片切割：从母切片中拷贝出一个子切片来，子切片和母切片共享底层数组。对数组进行切割可以转换成切片，切片将原数组作为内部底层数组。也就是说修改了原数组会影响到新切片，对切片的修改也会影响到原数组。

  ![10f76bb146c86095d1474d90cb312781](https://user-images.githubusercontent.com/13096375/58757354-8e651800-853d-11e9-9fdf-5dd4e55e71b0.jpg)

- 切片的扩容：当比较短的切片扩容时，系统会多分配 100% 的空间，也就是说分配的数组容量是切片长度的2倍。但切片长度超过1024时，扩容策略调整为多分配 25% 的空间，这是为了避免空间的过多浪费。

#### 结构体

- 变量：首字母大写是公开变量，首字母小写是内部变量，分别相当于类成员变量的 Public 和 Private 类别。内部变量只有属于同一个 package（简单理解就是同一个目录）的代码才能直接访问。
- 方法：方法名称分首字母大小写，它的权限规则和字段一样，首字母大写就是公开方法，首字母小写就是内部方法，只能归属于同一个包的代码才可以访问内部方法。